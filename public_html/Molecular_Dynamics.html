<!DOCTYPE html>
<!--
/*
*   FFX Web Application
*
*   This project provides a GUI for persons to generate a JNLP dynamically based
*   on forms provided on various HTML pages.
*
*   Author: Ian Nessler
*   Year:   2014
*/
-->
<html>
    <!--[if !IE]> -->
    <head>
        <title>Molecular Dynamics</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css2/bootstrap.min.css">
        <style>
            input[type="number"], textarea {
                background-color: white;
            }
            .jumbotron {
                background-color: white;
            }
            body {
                padding-top: 50px;
                padding-bottom: 20px;
                background-color:#2B2B2B;
                color: #F6F6F6;
            }
            .row {
                padding-bottom: 3px;
                padding-left: 10px;
                margin-left: auto;
                margin-right: auto;
            }
             .button1 {
                position: relative;
                padding-top: 10px;
                left: 15px;
                color: #2B2B2B;
            }         
        </style>
        <link rel="stylesheet" href="css2/main.css">
        <link rel="stylesheet" href="css2/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css2/main.css">
        <script src="js2/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0/angular.min.js"></script>
        <script src="js2/libs/FileSaver.js-master/FileSaver.min.js"></script>
        <script src="js2/libs/Processing/RunFFX.js"></script>
        <script src="js2/libs/angular.js/angularController.js"></script>
    </head>
    <body ng-app="WebApp">
        <div  id="menubar" class="navbar  navbar-inverse navbar-fixed-top" role="navigation" style="background-color:black;">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle " data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand " href="index-JNLP.html">FFX Web Application</a>
                </div>
                <div class="navbar-collapse collapse navbar-right">
                    <ul class="nav navbar-nav">
                        <li>
                            <a class="navbar-brand" href="index-JNLP.html" role="button">
                                <font>Home</font>
                            </a>
                        </li>
                        <li>
                            <a class="navbar-brand" href="LearnMore.html" role="button">
                                About
                            </a>
                        </li>
                        <li id="Dropdown" class="dropdown">
                            <a href="#" class="dropdown-toggle navbar-brand" data-toggle="dropdown" role="button"><font style="color: yellow;">Functions<span class="caret"></span></font></a>
                            <ul class="dropdown-menu"  role="menu">
                                <li class="divider" style="margin-top: -5px"></li>
                                <li><a href="Minimize.html" style="padding-top: -5px;">Minimize</a></li>
                                <li class="divider" ></li>
                                <li><a href="Molecular_Dynamics.html"><font style="color: yellow;">Molecular Dynamics</font></a></li>
                                <li class="divider"></li>
                                <li><a href="Rotamer.html">Rotamer Optimization</a></li>
                                <li class="divider"></li>
                                <li><a href="RealSpace.html">Real Space</a></li>
                                <li class="divider"></li>
                            </ul>
                        </li>
                        <li>
                            <a id="link" class="navbar-brand" href="ContactUs.html" role="button">
                                Contact
                            </a>
                        </li>
                    </ul>
                </div>
                <!--          .navbar-collapse -->
            </div>
        </div>
        <hr style="border-width: 5px; margin-top: auto; margin-bottom: auto; ">
        <hr style="border-width: 5px; margin-top: auto; margin-bottom: auto; border-color: #2B2B2B;">
        <div class="jumbotron">
            <div class="container" >
                <h1>Molecular Dynamics</h1>
                <p>Force Field X</p>
                <p>The following forms will allow you to select the specifics of the minimization that you wish to run.</p>
            </div>
        </div>
        <hr style="border-width: 10px; margin-top: -10px; margin-bottom: auto; border-color: #2B2B2B;">
        <hr style="border-width: 5px;  margin-top: -5px; margin-bottom: auto; ">
        <div class="container" style="margin-left: 40px" >
            <form name="MDForm" ng-controller="Molecular_Dynamics_Controller">
                <div class='row' style="height: 20px;"></div>
                <div class='row'>
                    <h2>
                        Follow the steps below to begin:
                    </h2>
                </div>
                <hr style="border-width: 2px;  margin-top: -5px; margin-bottom: auto; ">
                <div class='row' style="height: 20px;"></div>
                <div class='row'>
                    <h4>
                        <b>
                            1. Upload parameter file below:
                        </b>
                    </h4>
                    <div class="form-group">
                        <div class="container">
                            <div class="row">
                                <input type="file" id="PDB_File" finalnumber="finalnumber"  fileread="fileRead" time="time" class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                <div  id="diver" ng-cloak ng-show="fileRead" class="wordwrap container-fluid">
                                    <p ng-show="time">The file that was uploaded contains {{finalnumber}} atoms.
                                        With this number of atoms an estimated time of analysis is around {{time}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class='row'>
                    <h4>
                        2. Set variables pertaining to the calculation below: 
                    </h4>
                </div>
                <div class="container" ng-cloak>
                    <div class="row" >
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9" ng-class="{
                                'has-error'
                                : MDForm.input0.$error.number, 'has-success':Number0 }">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input ng-model="flag0" ng-if="Number0" type="checkbox" ng-init="flag0 = true">
                                </span>
                                <input name="input0" ng-model="Number0" placeholder=" Number of molecular dynamics steps." min="0" type="number" class="form-control" ng-pattern="NumberPattern" required>
                                <div class="input-group-addon dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button">
                                        <font style="color:black">What is this?</font>
                                    </a>
                                    <div class="dropdown-menu special wordwrap container-fluid" role="menu">
                                        Number of molecular dynamics steps.
                                    </div>
                                </div>
                            </div><!-- /input-group -->
                        </div>                   
                    </div>
                    <div class="row">
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9" ng-class="{
                                'has-error'
                                : MDForm.input1.$error.number, 'has-success':Number1  }">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input ng-model="flag1" ng-if="Number1" type="checkbox" ng-init="flag1 = true">
                                </span>
                                <input name="input1" ng-model="Number1" placeholder="Time discretization (fsec)." type="number" class="form-control" min="0" ng-pattern="NumberPattern" required>
                                <div class="input-group-addon dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button">
                                        <font style="color:black">What is this?</font>
                                    </a>
                                    <div class="dropdown-menu special wordwrap" role="menu">
                                        Number of molecular dynamics steps.
                                    </div>
                                </div>
                            </div><!-- /input-group -->
                        </div>                   
                    </div>
                    <div class="row">
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9" ng-class="{
                                'has-error'
                                : MDForm.input2.$error.number, 'has-success':Number2  }">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input ng-model="flag2" ng-if="Number2" type="checkbox" ng-init="flag2 = true">
                                </span>
                                <input name="input2" onchange="" ng-model="Number2" type="number" min="0" placeholder="Temperature in degrees Kelvin." class="form-control" ng-pattern="NumberPattern" required>
                                <div class="input-group-addon dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button">
                                        <font style="color:black">What is this?</font>
                                    </a>
                                    <div class="dropdown-menu special wordwrap" role="menu" style="align: justify;">
                                        <span role="menuitem">Number of molecular dynamics steps.Number of molecular dynamics steps.Number of molecular dynamics steps.Number of molecular dynamics steps.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input ng-model="flag3" ng-if="Number3" type="checkbox" ng-init="flag3 = true">
                                    Polarization:
                                </span>
                                <select name="input3" ng-model="Number3" class="form-control">
                                    <option></option>
                                    <option ng-value="None">None</option>
                                    <option ng-value="Direct">Direct</option>
                                    <option ng-value="Mutual">Mutual</option>
                                </select>
                                <div class="input-group-addon dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button">
                                        <font style="color:black">What is this?</font>
                                    </a>
                                    <div class="dropdown-menu special wordwrap" role="menu">
                                        Number of molecular dynamics steps.
                                    </div>
                                </div>
                            </div>
                        </div>   
                    </div>
                    <div class="row">
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9" ng-class="{'has-error':MDForm.input4.$error.number, 'has-success':Number4 }" >
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input ng-model="flag4" ng-if="Number4" type="checkbox" ng-init="flag4 = true">
                                </span>
                                <input name="input4" ng-model="Number4" placeholder="Interval to log thermodyanamics (psec)." min="0" type="number" class="form-control" ng-pattern="NumberPattern" required>
                                <div class="input-group-addon dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button">
                                        <font style="color:black">What is this?</font>
                                    </a>
                                    <div class="dropdown-menu special wordwrap" role="menu">
                                        Number of molecular dynamics steps.
                                    </div>
                                </div>
                            </div><!-- /input-group -->
                        </div>                   
                    </div>
                    <div class="row">
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9" ng-class="{
                                'has-error'
                                : MDForm.input5.$error.number, 'has-success':Number5  }">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input ng-model="flag5" ng-if="Number5" type="checkbox" ng-init="flag5 = true">
                                </span>
                                <input name="input5" ng-model="Number5" placeholder="Interval to write out coordinates (psec)." min="0" type="number" class="form-control" ng-pattern="NumberPattern" required>
                                <div class="input-group-addon dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button">
                                        <font style="color:black">What is this?</font>
                                    </a>
                                    <div class="dropdown-menu special wordwrap" role="menu">
                                        Number of molecular dynamics steps.
                                    </div>
                                </div>
                            </div><!-- /input-group -->
                        </div>  
                    </div>
                    <div class="row">
                        <div class="button1">
                            <button ng-class="{'disabled': MDForm.input5.$error.number || MDForm.input4.$error.number || MDForm.input3.$error.number || MDForm.input2.$error.number || MDForm.input1.$error.number || MDForm.input0.$error.number}" 
                                    ng-click="CollectFlags(Number0, Number1, Number2, Number3, Number4, Number5, Number6); migrateHtml()"
                                    type="button" class="btn btn-color" onclick='JnlpFunction()'>Create JNLP File</button> 
                        </div>
                    </div>
                </div>
                {{base64data}}
                <div class='row'>
                {{base64dataFinal}}
                </div>
                <script src=https://www.java.com/js/deployJava.js></script>
                <script jnlp-embedder base64data='base64data'>
                
                    deployJava.createWebStartLaunchButtonEx('PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIGpubHAgUFVCTElDICctLy9TdW4gTWljcm9zeXN0ZW1zLCBJbmMvL0RURCBKTkxQIERlc2NyaXB0b3IgNi4wLy9FTicgJ2h0dHA6Ly9qYXZhLnN1bi5jb20vZHRkL0pOTFAtNi4wLmR0ZCc+CjxqbmxwIHNwZWM9IjYuMCsiPgogICAgPGluZm9ybWF0aW9uPgogICAgICAgIDx0aXRsZT5Gb3JjZSBGaWVsZCBYPC90aXRsZT4KICAgICAgICA8dmVuZG9yPk1pY2hhZWwgSi4gU2NobmllZGVyczwvdmVuZG9yPgogICAgICAgIDxob21lcGFnZSBocmVmPSJodHRwOi8vZmZ4LmJpb2NoZW0udWlvd2EuZWR1Ii8+CiAgICAgICAgPGRlc2NyaXB0aW9uPlNvZnR3YXJlIGZvciBNb2xlY3VsYXIgQmlvcGh5c2ljczwvZGVzY3JpcHRpb24+CiAgICAgICAgPGljb24gaHJlZj0iaW1hZ2VzL2ljb24xMjgucG5nIi8+CiAgICAgICAgPG9mZmxpbmUtYWxsb3dlZC8+CiAgICA8L2luZm9ybWF0aW9uPgogICAgPHNlY3VyaXR5PgogICAgICAgIDxhbGwtcGVybWlzc2lvbnMvPgogICAgPC9zZWN1cml0eT4KICAgIDx1cGRhdGUgY2hlY2s9ImFsd2F5cyIgcG9saWN5PSJhbHdheXMiLz4KICAgIDxyZXNvdXJjZXM+CiAgICAgICAgPGphdmEgdmVyc2lvbj0iMS44IiBpbml0aWFsLWhlYXAtc2l6ZT0iMUciIG1heC1oZWFwLXNpemU9IjFHIi8+CiAgICAgICAgPHByb3BlcnR5IG5hbWU9ImozZC5yZW5kIiB2YWx1ZT0iam9nbCIvPgogICAgICAgIDxleHRlbnNpb24gbmFtZT0iZmZ4LWFsbCIgaHJlZj0iaHR0cDovL2ZmeC5iaW9jaGVtLnVpb3dhLmVkdS9mZngtY29tbW9ucy9mZngtYWxsLTEuMC4wLWJldGEuam5scCIgLz4KICAgICAgICA8ZXh0ZW5zaW9uIG5hbWU9ImZmeC1kZXBlbmRlbmN5IiBocmVmPSJodHRwOi8vZmZ4LmJpb2NoZW0udWlvd2EuZWR1L2RlcGVuZGVuY3ktcmVwby9mZngtZGVwZW5kZW5jeS0xLjAuMC1iZXRhLmpubHAiIC8+CiAgICAgICAgPGV4dGVuc2lvbiBuYW1lPSJqb2dsLWFsbC1hd3QiIGhyZWY9Imh0dHA6Ly9qb2dhbXAub3JnL2RlcGxveW1lbnQvdjIuMy4xL2pvZ2wtYWxsLWF3dC5qbmxwIiAvPgogICAgPC9yZXNvdXJjZXM+CiAgICA8YXBwbGljYXRpb24tZGVzYyBtYWluLWNsYXNzPSJmZnguTWFpbiI+CiAgICAgICA8YXJndW1lbnQ+bWQgPC9hcmd1bWVudD4KICAgICAgIDxhcmd1bWVudD4gRG93bmxvYWRzLzJSNFIucGRiIDwvYXJndW1lbnQ+CiAgICA8L2FwcGxpY2F0aW9uLWRlc2M+Cjwvam5scD4=');
//                    console.log({{base64data}});
                      
                </script>
                <script>
    var attributes = {} ;
    var parameters = {jnlp_href: 'ffx/ffx.jnlp',
        jnlp_embedded: 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIGpubHAgUFVCTElDICctLy9TdW4gTWljcm9zeXN0ZW1zLCBJbmMvL0RURCBKTkxQIERlc2NyaXB0b3IgNi4wLy9FTicgJ2h0dHA6Ly9qYXZhLnN1bi5jb20vZHRkL0pOTFAtNi4wLmR0ZCc+CjxqbmxwIHNwZWM9IjYuMCsiPgogICAgPGluZm9ybWF0aW9uPgogICAgICAgIDx0aXRsZT5Gb3JjZSBGaWVsZCBYPC90aXRsZT4KICAgICAgICA8dmVuZG9yPk1pY2hhZWwgSi4gU2NobmllZGVyczwvdmVuZG9yPgogICAgICAgIDxob21lcGFnZSBocmVmPSJodHRwOi8vZmZ4LmJpb2NoZW0udWlvd2EuZWR1Ii8+CiAgICAgICAgPGRlc2NyaXB0aW9uPlNvZnR3YXJlIGZvciBNb2xlY3VsYXIgQmlvcGh5c2ljczwvZGVzY3JpcHRpb24+CiAgICAgICAgPGljb24gaHJlZj0iaW1hZ2VzL2ljb24xMjgucG5nIi8+CiAgICAgICAgPG9mZmxpbmUtYWxsb3dlZC8+CiAgICA8L2luZm9ybWF0aW9uPgogICAgPHNlY3VyaXR5PgogICAgICAgIDxhbGwtcGVybWlzc2lvbnMvPgogICAgPC9zZWN1cml0eT4KICAgIDx1cGRhdGUgY2hlY2s9ImFsd2F5cyIgcG9saWN5PSJhbHdheXMiLz4KICAgIDxyZXNvdXJjZXM+CiAgICAgICAgPGphdmEgdmVyc2lvbj0iMS44IiBpbml0aWFsLWhlYXAtc2l6ZT0iMUciIG1heC1oZWFwLXNpemU9IjFHIi8+CiAgICAgICAgPHByb3BlcnR5IG5hbWU9ImozZC5yZW5kIiB2YWx1ZT0iam9nbCIvPgogICAgICAgIDxleHRlbnNpb24gbmFtZT0iZmZ4LWFsbCIgaHJlZj0iaHR0cDovL2ZmeC5iaW9jaGVtLnVpb3dhLmVkdS9mZngtY29tbW9ucy9mZngtYWxsLTEuMC4wLWJldGEuam5scCIgLz4KICAgICAgICA8ZXh0ZW5zaW9uIG5hbWU9ImZmeC1kZXBlbmRlbmN5IiBocmVmPSJodHRwOi8vZmZ4LmJpb2NoZW0udWlvd2EuZWR1L2RlcGVuZGVuY3ktcmVwby9mZngtZGVwZW5kZW5jeS0xLjAuMC1iZXRhLmpubHAiIC8+CiAgICAgICAgPGV4dGVuc2lvbiBuYW1lPSJqb2dsLWFsbC1hd3QiIGhyZWY9Imh0dHA6Ly9qb2dhbXAub3JnL2RlcGxveW1lbnQvdjIuMy4xL2pvZ2wtYWxsLWF3dC5qbmxwIiAvPgogICAgPC9yZXNvdXJjZXM+CiAgICA8YXBwbGljYXRpb24tZGVzYyBtYWluLWNsYXNzPSJmZnguTWFpbiI+CiAgICAgICA8YXJndW1lbnQ+bWQgPC9hcmd1bWVudD4KICAgICAgIDxhcmd1bWVudD4gRG93bmxvYWRzLzJSNFIucGRiIDwvYXJndW1lbnQ+CiAgICA8L2FwcGxpY2F0aW9uLWRlc2M+Cjwvam5scD4='
    } ;
    deployJava.runApplet(attributes, parameters, '1.7');
</script>
                <!--<script base64data='base64data' jnlp-embedder></script>-->
                <!--                <div>TODO write content </div>
                            {{textString}}-->
                <!--<div foo></div>-->
<!--<a href="jnlp/ffx.jnlp">Launch ffx Application</a>-->
                <!--        var jnlpFile = scope.textString;
                        deployJava.createWebStartLaunchButtonEx(jnlpFile);-->

                <!--        <script> 
                            var attributes = {
                                code:'ffx.jnlp',  width:300, height:300} ; 
                            var parameters = {jnlp_href: 'jnlp/ffx.jnlp'} ; 
                            deployJava.runApplet(attributes, parameters, '1.7'); 
                        </script>-->
                <!--<div>TODO write content</div>-->
                <hr>
                <footer>
                    <div class="col-md-10" style="margin-top: 30px; margin-left: 40px; padding-bottom:30px;">
                        <p>
                            &copy; University of Iowa Biochemistry Department 2014
                        </p>
                    </div>
                    <div class="col-md-2" style="margin-right:-100px">
                        <img src="img2/Logo2.png" alt="Smiley face" height="100" width="100">
                    </div>
                </footer>
            </form> 
        </div>
        <script>window.jQuery || document.write('<script src="js2/vendor/jquery-1.11.1.min.js"><\/script>');</script>
        <!-- <![endif]-->
</html>